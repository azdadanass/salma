<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3c.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" template="template/template.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">


	<ui:define name="title">
		<h:outputText value="#{staticView.applicationName}" />
	</ui:define>

	<ui:define name="header">
		<ui:include src="template/header.xhtml" />
		<link href="resources/css/bootstrap-nav/bootstrap-nav-wizard.css" rel="stylesheet" />
	</ui:define>

	<ui:define name="sider">
		<ui:include src="template/sider.xhtml" />
	</ui:define>

	<ui:define name="navigator">
		<ul class="breadcrumb">
			<li>
				<i class="ace-icon fa fa-home" />
				<a href="#">
					<h:outputText value="Main Menu" />
				</a>
			</li>
			<li class="active">
				<h:outputText value="#{poView.isAddPage?'Add New':'Edit'} Po" />
			</li>
		</ul>
	</ui:define>

	<ui:define name="body">
		<p:importEnum type="ma.azdad.model.Profile" var="Profile" allSuffix="ALL_ENUM_VALUES" />
		<h:form id="main_form">
			<div class="widget-box">
				<div class="widget-header widget-header-blue widget-header-flat">
					<h4 class="widget-title lighter">
						<i class="ace-icon fa #{poView.id == null?'fa-plus green':'fa-edit orange'} bigger-110"></i>
						<h:outputText value=" #{poView.id == null?'Add New':'Edit'} Po" />
					</h4>
				</div>
				<div class="widget-body">
					<div class="widget-main">
						<h:panelGroup id="nav-wizard">
							<ul class="nav nav-wizard">
								<li class="#{poView.step==1?'active':''}">
									<a href="#">
										<h:outputText value="General informations" />
									</a>
								</li>
								<li class="#{poView.step==2?'active':''}">
									<a href="#">
										<h:outputText value="PO Details" />
									</a>
								</li>
								<li class="#{poView.step==3?'active':''}">
									<a href="#">
										<h:outputText value="Invoicing &amp; Payement terms" />
									</a>
								</li>
								<li class="#{poView.step==4?'active':''}">
									<a href="#">
										<h:outputText value="Shipment &amp; Delivery Terms" />
									</a>
								</li>
								<li class="#{poView.step==5?'active':''}">
									<a href="#">
										<h:outputText value="Comments" />
									</a>
								</li>
								<li class="#{poView.step==6?'active':''}">
									<a href="#">
										<h:outputText value="Summary" />
									</a>
								</li>
							</ul>
						</h:panelGroup>
						<hr />
						<p:messages id="messages" closable="true" />
						<h:panelGroup id="steps">
							<f:subview id="step1" rendered="#{poView.step==1}">
								<h3 class="lighter block green">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" General informations" />
								</h3>
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Company " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<h:selectOneMenu value="#{poView.model.companyId}" styleClass="col-xs-12 col-sm-6" required="true" requiredMessage="Company should not be null">
												<f:selectItem itemLabel="---" noSelectionOption="true" />
												<f:selectItems value="#{companyView.findByProfile(Profile.ASSISTANT)}" var="item" itemLabel="#{item.name}" itemValue="#{item.id}" />
												<p:ajax update="supplier" listener="#{poView.changeCompanyListener()}" />
											</h:selectOneMenu>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Supplier " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:selectOneMenu id="supplier" value="#{poView.model.supplierId}" styleClass="col-xs-12 col-sm-6" filter="true" filterMatchMode="contains" required="true"
												requiredMessage="Supplier should not be null">
												<f:selectItem itemLabel="---" noSelectionOption="true" />
												<f:selectItems value="#{supplierView.findActiveByCompany(poView.model.companyId)}" var="item" itemLabel="#{item.name}" itemValue="#{item.id}" />
												<p:ajax listener="#{poView.changeSupplierListener()}" update="costCategory,catalog,currency" />
											</p:selectOneMenu>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Currency " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<h:selectOneMenu id="currency" value="#{poView.model.currencyId}" styleClass="col-xs-12 col-sm-6" required="true" requiredMessage="Currency should not be null"
												converter="#{genericSecuredConverter}">
												<f:selectItem itemLabel="---" noSelectionOption="true" />
												<f:selectItems value="#{poView.model.supplier.getCurrencyValuesList(poView.model.companyId)}" var="item" itemLabel="#{item.name}" itemValue="#{item.id}" />
												<p:ajax listener="#{poView.changeCurrencyListener()}" update="catalog" />
											</h:selectOneMenu>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Project " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:selectOneMenu value="#{poView.model.projectId}" styleClass="col-xs-12 col-sm-6" filter="true" filterMatchMode="contains" required="true" requiredMessage="Project should not be null">
												<f:selectItem itemLabel="---" noSelectionOption="true" />
												<f:selectItems value="#{projectView.findOpen()}" var="item" itemLabel="#{item.name}" itemValue="#{item.id}" />
												<p:ajax listener="#{poView.changeProjectListener()}" update="projectData,date,:main_form:messages" />
											</p:selectOneMenu>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<h:panelGroup id="projectData">
									<div class="row">
										<div class="col-xs-12 col-sm-3">
											<label class="control-label pull-right">
												<h:outputText value="Project Start Date" />
											</label>
										</div>
										<div class="col-xs-12 col-sm-9">
											<div class="clearfix">
												<p:inputText value="#{poView.model.project.startDate}" readonly="true" />
												<br />
											</div>
										</div>
									</div>
									<div class="space-8" />
									<div class="row">
										<div class="col-xs-12 col-sm-3">
											<label class="control-label pull-right">
												<h:outputText value="Project End Date" />
											</label>
										</div>
										<div class="col-xs-12 col-sm-9">
											<div class="clearfix">
												<p:inputText value="#{poView.model.project.endDate}" readonly="true" />
												<br />
											</div>
										</div>
									</div>
									<div class="space-8" />
									<div class="row">
										<div class="col-xs-12 col-sm-3">
											<label class="control-label pull-right">
												<h:outputText value="Available Budget" />
											</label>
										</div>
										<div class="col-xs-12 col-sm-9">
											<div class="clearfix">
												<p:inputText value="#{poView.model.project.availableBudgetStr}" readonly="true"
													style="#{poView.model.project.availableBudget gt 0?'background:#dff0d8 !important;color:#3c763d':'background:#f2dede !important;color:#a94442'}" />
												<br />
											</div>
										</div>
									</div>
								</h:panelGroup>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="PO Date " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:calendar id="date" value="#{poView.model.date}" pattern="yyyy-MM-dd" mask="true" pages="3" navigator="true" mindate="#{poView.model.project.startDate}"
												maxdate="#{poView.model.project.endDate}" required="true" requiredMessage="Po Date Should not be null" autocomplete="off" />
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Cost Category " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<h:selectOneMenu id="costCategory" value="#{poView.model.costCategory}" styleClass="col-xs-12 col-sm-6" required="true" requiredMessage="Cost Category should not be null">
												<f:selectItem itemLabel="---" noSelectionOption="true" />
												<f:selectItems value="#{poView.model.supplier.getCostCategoryList(poView.model.companyId)}" var="item" itemLabel="#{item.value}" itemValue="#{item}" />
											</h:selectOneMenu>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="From Catalog " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:commandLink id="fromCatalog" update="fromCatalog,catalog" partialSubmit="true" process="@this">
												<i class="ace-icon fa #{poView.model.fromCatalog?'fa-toggle-on green':'fa-toggle-off grey'} bigger-200" />
												<f:setPropertyActionListener value="#{!poView.model.fromCatalog}" target="#{poView.model.fromCatalog}" />
											</p:commandLink>
											<br />
										</div>
									</div>
								</div>
								<h:panelGroup id="catalog">
									<f:subview rendered="#{poView.model.fromCatalog}">
										<div class="space-8" />
										<div class="row">
											<div class="col-xs-12 col-sm-3">
												<label class="control-label pull-right">
													<h:outputText value="Catalog " />
												</label>
											</div>
											<div class="col-xs-12 col-sm-9">
												<div class="clearfix">
													<h:selectOneMenu value="#{poView.model.catalogId}" styleClass="col-xs-12 col-sm-6" required="true" requiredMessage="Catalog should not be null">
														<f:selectItem itemLabel="---" noSelectionOption="true" />
														<f:selectItems value="#{catalogView.findBySupplierAndCurrency(poView.model.supplierId,poView.model.currencyId)}" var="item" itemLabel="#{item.name}" itemValue="#{item.id}" />
													</h:selectOneMenu>
													<br />
												</div>
											</div>
										</div>
									</f:subview>
								</h:panelGroup>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Comment " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:inputTextarea value="#{poView.model.comment}" styleClass="col-xs-12 col-sm-6" />
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
							</f:subview>
							<f:subview id="step2" rendered="#{poView.step==2}">
								<h3 class="lighter block green">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" PO Details" />
								</h3>
								<div class="row">
									<div class="col-sm-12">
										<div class="table-header col-sm-12 col-xs-12">
											<i class="fa fa-list" />
											<h:outputText value=" Detail List" />
										</div>
										<div class="col-sm-12 col-xs-12 aa-datatable-container">
											<f:subview rendered="#{!poView.model.fromCatalog}">
												<p:dataTable id="detailList" value="#{poView.model.detailList}" var="item" styleClass="table table-striped table-hover center" paginatorAlwaysVisible="false" paginator="true"
													paginatorPosition="bottom" paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}" rowIndexVar="rowIndexVar">

													<p:column headerText="Reference" width="80">
														<p:inputText value="#{item.reference}" style="width: 60px" readonly="true" />
													</p:column>

													<p:column headerText="Cost Type" width="120">
														<h:selectOneMenu value="#{item.costType}" style="width:100px">
															<f:selectItem noSelectionOption="true" itemLabel="---" />
															<f:selectItems value="#{poView.model.supplier.getCostTypeList(poView.model.companyId,poView.model.costCategory)}" var="costType" itemValue="#{costType}" itemLabel="#{costType.value}" />
														</h:selectOneMenu>
													</p:column>

													<p:column headerText="Description">
														<p:inputText value="#{item.description}" style="width:90%" />
													</p:column>

													<p:column headerText="Quantity" width="100">
														<p:inputText value="#{item.quantity}" style="width: 90%">
															<p:ajax event="keyup" listener="#{poView.model.calculateAmountHt()}" update="amountHt,:main_form:step2:totalAmounts" />
														</p:inputText>
													</p:column>

													<p:column headerText="Unit" width="100">
														<p:inputText value="#{item.unit}" style="width:90%" />
													</p:column>

													<p:column headerText="Unit Price" width="100">
														<p:inputText value="#{item.unitPriceWhithoutDiscount}" style="width: 90%">
															<p:ajax event="keyup" listener="#{poView.model.calculateAmountHt()}" update="amountHt,:main_form:step2:totalAmounts" />
														</p:inputText>
													</p:column>

													<p:column headerText="Discount %" width="100">
														<p:inputText value="#{item.discount}" style="width: 90%">
															<p:ajax event="keyup" listener="#{poView.model.calculateAmountHt()}" update="amountHt,:main_form:step2:totalAmounts" />
														</p:inputText>
													</p:column>

													<p:column headerText="Service Code">
														<h:selectOneMenu value="#{item.serviceCode}" style="width: 90%">
															<f:selectItem itemLabel="---" noSelectionOption="true" />
															<f:selectItems value="#{poView.model.supplier.getServiceCodeValuesList(poView.model.companyId)}" var="serviceCode" itemLabel="#{serviceCode}" itemValue="#{serviceCode}" />
															<p:ajax listener="#{item.initVatAndVatAccountingCode(poView.model)}" update="vat,:main_form:step2:totalAmounts" />
														</h:selectOneMenu>
													</p:column>

													<p:column headerText="VAT %" width="100">
														<p:inputNumber id="vat" value="#{item.vat}" thousandSeparator="" decimalSeparator="." decimalPlaces="4" readonly="#{!item.allowVatInput(poView.model)}">
															<p:ajax event="keyup" update=":main_form:step2:totalAmounts" />
														</p:inputNumber>
													</p:column>

													<p:column headerText="Total Price" width="100">
														<p:inputText id="amountHt" value="#{item.amountHt}" style="width: 90%" readonly="true" />
													</p:column>

													<p:column headerText="Actions" styleClass="center" width="70">
														<div class="action-buttons center">
															<p:commandLink title="Remove row" action="#{poView.deleteDetail(item)}" update="detailList,:main_form:step2:totalAmounts" partialSubmit="true" process="detailList"
																rendered="#{poView.canDeleteDetail()}">
																<i class="ace-icon fa fa-remove bigger-130 red" />
															</p:commandLink>
														</div>
													</p:column>

													<f:facet name="footer">
														<div class="action-buttons center">
															<p:commandLink title="Add New Item" action="#{poView.addDetail()}" update="detailList" partialSubmit="true" process="detailList" rendered="#{poView.canAddDetail()}">
																<i class="fa fa-plus green" />
															</p:commandLink>
														</div>
													</f:facet>
												</p:dataTable>
											</f:subview>
											<f:subview rendered="#{poView.model.fromCatalog}">
												<p:dataTable id="catalogPoDetailList" value="#{poView.catalogPoDetailList}" var="item" styleClass="table table-striped table-hover center" paginatorAlwaysVisible="false" paginator="true"
													paginatorPosition="bottom" paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}" rowIndexVar="rowIndexVar" expandableRowGroups="true"
													sortBy="#{item.catalogDetail.category}" rowSelectMode="checkbox" rowKey="#{item.catalogDetail.id}" selection="#{poView.model.detailList}">


													<p:ajax event="rowSelectCheckbox" process="@this" update="catalogPoDetailList" />
													<p:ajax event="rowUnselectCheckbox" process="@this" update="catalogPoDetailList" />
													<p:ajax event="toggleSelect" process="@this" update="catalogPoDetailList" />

													<p:headerRow>
														<p:column colspan="14" styleClass="center">
															<h:outputText value="#{item.catalogDetail.category}" />
														</p:column>
													</p:headerRow>

													<p:column selectionMode="multiple" styleClass="ace aa-checkbox-column" exportable="false" />

													<p:column headerText="Reference" width="80">
														<h:outputText value="#{item.reference}" />
													</p:column>

													<p:column headerText="Code" width="80">
														<h:outputText value="#{item.catalogDetail.code}" />
													</p:column>

													<p:column headerText="Part Number">
														<h:outputText value="#{item.catalogDetail.description}" styleClass="aa-cut-text" />
													</p:column>

													<p:column headerText="Description">
														<p:inputText value="#{item.description}" style="width: 90%" rendered="#{poView.model.detailList.contains(item)}" />
													</p:column>

													<p:column headerText="Cost Type" width="150">
														<h:outputText value="#{item.costType.value}" styleClass="bolder blue" />
													</p:column>

													<p:column headerText="Unit" width="90">
														<h:outputText value="#{item.unit}" />
													</p:column>

													<p:column headerText="Quantity" width="90">
														<p:inputText value="#{item.quantity}" style="width: 90%" rendered="#{poView.model.detailList.contains(item)}">
															<p:ajax event="keyup" listener="#{poView.model.calculateAmountHt()}" update="amountHt,:main_form:step2:totalAmounts" />
														</p:inputText>
													</p:column>

													<p:column headerText="Unit" width="100">
														<p:inputText value="#{item.unit}" style="width:90%" />
													</p:column>

													<p:column headerText="Unit Price" width="90">
														<h:outputText value="#{item.unitPriceWhithoutDiscount}">
															<f:convertNumber type="number" maxFractionDigits="4" />
														</h:outputText>
													</p:column>

													<p:column headerText="Discount %" width="100">
														<p:inputText value="#{item.discount}" style="width: 90%" rendered="#{poView.model.detailList.contains(item)}">
															<p:ajax event="keyup" listener="#{poView.model.calculateAmountHt()}" update="amountHt,:main_form:step2:totalAmounts" />
														</p:inputText>
													</p:column>

													<p:column headerText="Service Code">
														<h:selectOneMenu value="#{item.serviceCode}" style="width: 90%" rendered="#{poView.model.detailList.contains(item)}">
															<f:selectItem itemLabel="---" noSelectionOption="true" />
															<f:selectItems value="#{poView.model.supplier.getServiceCodeValuesList(poView.model.companyId)}" var="serviceCode" itemLabel="#{serviceCode}" itemValue="#{serviceCode}" />
															<p:ajax listener="#{item.initVatAndVatAccountingCode(poView.model)}" update="vat,:main_form:step2:totalAmounts" />
														</h:selectOneMenu>
													</p:column>

													<p:column headerText="VAT %" width="100">
														<p:inputNumber id="vat" value="#{item.vat}" thousandSeparator="" decimalSeparator="." decimalPlaces="4" readonly="#{!item.allowVatInput(poView.model)}"
															rendered="#{poView.model.detailList.contains(item)}">
															<p:ajax event="keyup" update=":main_form:step2:totalAmounts" />
														</p:inputNumber>
													</p:column>

													<!-- <p:column headerText="VAT %" width="100">
														<h:selectOneMenu value="#{item.vat}" style="width: 90%" rendered="#{poView.model.detailList.contains(item) and poView.showVatList}">
															<f:selectItems value="#{poView.model.supplier.getVatValuesList(poView.model.companyId)}" var="vat" itemLabel="#{vat}" itemValue="#{vat}" />
															<p:ajax update=":main_form:step2:totalAmounts" />
														</h:selectOneMenu>
														<p:inputNumber value="#{item.vat}" thousandSeparator="" decimalSeparator="." decimalPlaces="4" rendered="#{poView.model.detailList.contains(item) and !poView.showVatList}" />
													</p:column> -->

													<p:column headerText="Total Price" width="100">
														<p:inputText id="amountHt" value="#{item.amountHt}" style="width: 90%" readonly="true" rendered="#{poView.model.detailList.contains(item)}" />
													</p:column>

												</p:dataTable>
											</f:subview>
										</div>
									</div>
								</div>
								<div style="width: 90%; margin: auto;">
									<div class="hr hr8 hr-double hr-dotted"></div>
									<div class="row">
										<div class="col-sm-6 pull-right">
											<h4 class="pull-right">
												<h:panelGroup id="totalAmounts">
													<h:outputText value="Total Amount HT:" />
													<span class="blue">
														<h:outputText value="#{poView.model.amountHt}">
															<f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
														</h:outputText>
													</span>

													<h:outputText value="Total Amount TTC:" />
													<span class="green">
														<h:outputText value="#{poView.model.detailListTotalAmountTtc}">
															<f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
														</h:outputText>
													</span>
												</h:panelGroup>
											</h4>
										</div>
										<div class="col-sm-6 pull-left">
											<h:outputText value="Extra Information" />
										</div>
									</div>
								</div>
							</f:subview>
							<f:subview id="step3" rendered="#{poView.step==3}">
								<h3 class="lighter block green">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" Invoicing &amp; Payement terms" />
								</h3>

								<div class="row">
									<div class="col-xs-12 col-sm-8">
										<div class="form-group">
											<label class="col-xs-2 col-sm-2 control-label no-padding-right" for="form-field-basename">
												<h:outputText value="Template" />
											</label>
											<div class="col-xs-10 col-sm-10">
												<h:selectOneMenu value="#{poView.model.invoiceTermTemplateId}" style="width:300px" styleClass="col-sm-12" required="true" requiredMessage="Template should not be null"
													converter="#{genericSecuredConverter}">
													<f:selectItem itemLabel="---" noSelectionOption="true" />
													<f:selectItems value="#{poView.model.supplier.getInvoiceTermTemplateList(poView.model.companyId)}" var="item" itemLabel="#{item.identifierName} (#{item.name})" itemValue="#{item.id}" />
													<p:ajax listener="#{poView.changeInvoiceTermTemplateListener()}" update="oldInvoiceTermList,paymentTermList" />
												</h:selectOneMenu>
											</div>
										</div>
									</div>
								</div>
								<div class="space-8" />
								<h4 class="lighter block blue">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" Invoicing terms" />
								</h4>
								<div class="row">
									<div class="col-sm-offset-1 col-sm-10">
										<div class="table-header col-sm-12 col-xs-12">
											<i class="fa fa-list" />
											<h:outputText value=" Invoicing terms" />
										</div>
										<div class="col-sm-12 col-xs-12 aa-datatable-container">
											<p:dataTable id="oldInvoiceTermList" value="#{poView.model.invoiceTermTemplate.detailList}" var="item" styleClass="table table-striped table-hover center" paginatorAlwaysVisible="false"
												paginator="true" paginatorPosition="bottom" paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}" rowIndexVar="rowIndexVar">

												<p:column headerText="Numero">
													<h:outputText value="#{item.numero}" />
												</p:column>

												<p:column headerText="Phase">
													<h:outputText value="#{item.phase}" />
												</p:column>

												<p:column headerText="Percentage">
													<h:outputText value="#{item.percentage}" />
												</p:column>

											</p:dataTable>
										</div>
									</div>
								</div>
								<hr />
								<h4 class="lighter block blue">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" Payment terms" />
								</h4>
								<h:panelGroup id="paymentTermList">
									<ui:repeat var="invoiceTerm" value="#{poView.model.invoiceTermTemplate.detailList}">
										<div class="row">
											<div class="col-sm-offset-1 col-sm-10">
												<div class="table-header col-sm-12 col-xs-12">
													<i class="fa fa-list" />
													<h:outputText value=" #{invoiceTerm.numero} - #{invoiceTerm.phase}" />
												</div>
												<div class="col-sm-12 col-xs-12 aa-datatable-container">
													<p:dataTable id="detailList" value="#{invoiceTerm.detailList}" var="item" rows="20" styleClass="table table-striped table-hover center" paginatorAlwaysVisible="false" paginator="true"
														paginatorPosition="bottom" paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}" rowIndexVar="rowIndexVar">

														<p:column headerText="Number">
															<h:outputText value="#{item.numero}" styleClass="bolder green" />
														</p:column>

														<p:column headerText="Percentage">
															<h:outputText value="#{item.percentage}" />
														</p:column>

														<p:column headerText="Start Point">
															<h:outputText value="#{item.startPoint.value}" />
														</p:column>

														<p:column headerText="Duration">
															<h:outputText value="#{item.duration}" />
														</p:column>
													</p:dataTable>
												</div>
											</div>
										</div>
										<div class="space-8" />
									</ui:repeat>
								</h:panelGroup>
								<div class="space-16" />
							</f:subview>
							<f:subview id="step4" rendered="#{poView.step==4}">
								<h3 class="lighter block green">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" Shipment &amp; Delivery Terms" />
								</h3>
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Delivery Lead Time" />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:inputText value="#{poView.model.deliveryLeadTime}" required="true" requiredMessage="Delivery Lead Time should not be null" />
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Incoterms" />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<h:selectOneMenu value="#{poView.model.incoterms}" required="true" requiredMessage="Incoterms should not be null" styleClass="col-xs-12 col-sm-6">
												<f:selectItem itemLabel="---" noSelectionOption="true" />
												<f:selectItems value="#{poView.model.supplier.getIncotermsValuesList(poView.model.companyId)}" var="item" itemLabel="#{item}" itemValue="#{item}" />
											</h:selectOneMenu>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Shipping Doc Required" />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:commandLink id="shippingDocRequired" update="shippingDocRequired" partialSubmit="true" process="@this">
												<i class="ace-icon fa #{poView.model.shippingDocRequired?'fa-toggle-on green':'fa-toggle-off grey'} bigger-200" />
												<f:setPropertyActionListener value="#{!poView.model.shippingDocRequired}" target="#{poView.model.shippingDocRequired}" />
											</p:commandLink>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Site Delivery" />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:commandLink id="siteDelivery" update="siteDelivery" partialSubmit="true" process="@this">
												<i class="ace-icon fa #{poView.model.siteDelivery?'fa-toggle-on green':'fa-toggle-off grey'} bigger-200" />
												<f:setPropertyActionListener value="#{!poView.model.siteDelivery}" target="#{poView.model.siteDelivery}" />
											</p:commandLink>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Warranty" />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:commandLink id="warranty" update="warranty,warrantyPeriod" partialSubmit="true" process="@this">
												<i class="ace-icon fa #{poView.model.warranty?'fa-toggle-on green':'fa-toggle-off grey'} bigger-200" />
												<f:setPropertyActionListener value="#{!poView.model.warranty}" target="#{poView.model.warranty}" />
											</p:commandLink>
											<br />
										</div>
									</div>
								</div>
								<div class="space-8" />
								<h:panelGroup id="warrantyPeriod">
									<div class="row">
										<div class="col-xs-12 col-sm-3">
											<label class="control-label pull-right">
												<h:outputText value="Wararnty Period" />
											</label>
										</div>
										<div class="col-xs-12 col-sm-9">
											<div class="clearfix">
												<p:inputText value="#{poView.model.warrantyPeriod}" rendered="#{!poView.model.warranty}" required="true" requiredMessage="Wararnty Period should not be null" />
												<br />
											</div>
										</div>
									</div>
									<div class="space-8" />
								</h:panelGroup>
							</f:subview>
							<f:subview id="step5" rendered="#{poView.step==5}">
								<h3 class="lighter block green">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" Add Comment" />
								</h3>
								<div class="row">
									<div class="col-xs-12 col-sm-3">
										<label class="control-label pull-right">
											<h:outputText value="Comment " />
										</label>
									</div>
									<div class="col-xs-12 col-sm-9">
										<div class="clearfix">
											<p:inputTextarea value="#{poView.model.firstComment.content}" styleClass="col-xs-12 col-sm-6" />
										</div>
									</div>
								</div>
							</f:subview>
							<f:subview rendered="#{poView.step==6}">
								<h3 class="lighter block green">
									<i class="ace-icon fa fa-list-alt" />
									<h:outputText value=" Summary" />
								</h3>
								<ui:include src="viewPoTab1.xhtml" />
							</f:subview>
						</h:panelGroup>
						<hr />
						<div class="wizard-actions">
							<p:commandLink action="#{poView.previousStep()}" immediate="true" update="messages,nav-wizard,steps" styleClass="btn  btn-prev">
								<i class="ace-icon fa fa-arrow-left icon-on-right"></i>
								<h:outputText value="Back" />
							</p:commandLink>
							<p:commandLink id="next" action="#{poView.nextStep()}" update="messages,nav-wizard,steps,next" styleClass="btn btn-success btn-next">
								<h:outputText value="#{poView.step==6?'Finish':'Next'}" />
								<i class="ace-icon fa fa-arrow-right icon-on-right"></i>
							</p:commandLink>
						</div>
						<div class="space-16" />
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>
